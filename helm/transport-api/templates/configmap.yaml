apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.app.name }}-config
  labels:
    app: {{ .Values.app.name }}
data:
  # Application configuration
  app.conf: |
    [server]
    port = 8080
    workers = 4
    
    [logging]
    level = {{ .Values.app.env | default "INFO" }}
    format = json
    
    [database]
    project_id = {{ .Values.app.env | default "my-project" }}
    
  # Nginx configuration for potential future use
  nginx.conf: |
    worker_processes auto;
    error_log /dev/stderr warn;
    
    events {
        worker_connections 1024;
    }
    
    http {
        access_log /dev/stdout;
        
        upstream backend {
            server 127.0.0.1:8080;
        }
        
        server {
            listen 8000;
            
            location / {
                proxy_pass http://backend;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
            }
        }
    }